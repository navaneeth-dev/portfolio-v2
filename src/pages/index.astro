---
import BaseHead from "../components/BaseHead.astro";
import Header from "../components/Header.astro";
import Footer from "../components/Footer.astro";
import Project from "../components/Project.astro";
import { SITE_TITLE, SITE_DESCRIPTION } from "../config";
import LockPic from "../../public/Lock-dynamic-premium.png";
import DanteCert from "../../public/certs/dante.png";
import InCTFJCert from "../../public/certs/inctfj.jpg";
import PEHCert from "../../public/certs/peh.png";
import thmCert from "../../public/certs/THM-QV8UXGWYB4.png";
import thm2Cert from "../../public/certs/THM-V39MPRBO6C.png";
import { Image } from "@astrojs/image/components";
import "swiper/css";
import "swiper/css/navigation";

const latestPosts = (await Astro.glob("./blog/*.{md,mdx}"))
  .sort(
    (a, b) =>
      new Date(b.frontmatter.pubDate).valueOf() -
      new Date(a.frontmatter.pubDate).valueOf()
  )
  .slice(0, 3);
---

<!DOCTYPE html>
<html lang="en">
  <head>
    <BaseHead title={SITE_TITLE} description={SITE_DESCRIPTION} />
  </head>
  <body>
    <Header title={SITE_TITLE} />

    <!-- Hero -->
    <main class="relative overflow-hidden">
      <div
        class="container px-12 max-w-4xl mx-auto flex flex-col-reverse md:flex-row justify-around items-center py-6"
      >
        <!-- Content -->
        <div class="flex flex-1 flex-col gap-y-4 py-6">
          <h1 class="text-center md:text-left text-2xl md:text-3xl">
            Hi, my name is<br /><span class="font-bold">Navaneeth</span>
          </h1>
          <p class="text-center md:text-left">
            I&lsquo;m a <span class="font-bold">security researcher</span> studying
            BCA from Chennai
          </p>
          <button
            class="bg-primary text-white px-3 py-1 border border-black self-center md:self-start rounded hover:shadow-[5px_5px_0_rgba(0,0,0,1)] transition-shadow"
            >Get in touch</button
          >
        </div>
        <!-- Hero Image -->
        <div class="flex-1 flex justify-center">
          <Image
            src={LockPic}
            alt="Lock pic"
            class="max-h-80 z-10 w-5/6 md:max-w-none animate-bounce-slow"
            format="webp"
            quality={100}
          />
        </div>
      </div>
      <!-- Transformed rectangle -->
      <div
        class="hidden md:block overflow-hidden bg-primary w-[55vw] h-[55vw] absolute -right-2 top-1/2 rotate-45 -translate-y-1/2 translate-x-1/2"
      >
      </div>
      <!-- Mobile rect -->
      <div
        class="bg-primary md:hidden absolute top-12 right-1/2 translate-x-1/2 translate-y-1/4 max-w-[9rem] max-h-[9rem] w-[38vw] h-[38vw] rotate-45"
      >
      </div>
    </main>

    <!-- Projects -->
    <section class="border-y border-black py-12">
      <div class="container px-12 max-w-4xl mx-auto">
        <h2 class="text-primary text-2xl font-bold text-center mb-12">
          Projects
        </h2>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          <Project
            name="Hacked CMRL"
            description="When analyzing Chennai Metro Rail mobile app's traffic in burp, I found a vulnerable LFI endpoint then got access to web.config and finally got the source code by dumping a dll. After that did source code analysis and found a blind SQLI"
            image="/cmrl.png"
          />
          <Project
            name="Hacked NIOS"
            description="Found an endpoint in National Institute Of Open Schooling website that let me scrape any users personal details using burp, it had weak captcha implementation. Wrote a golang script and scraped some data"
            image="/nios.png"
          />
        </div>
      </div>
    </section>

    <!-- Latest Blog Posts -->
    <section class="">
      <div class="container px-12 max-w-4xl mx-auto py-12">
        <h2 class="text-primary text-2xl font-bold text-center">
          Latest Blog Posts
        </h2>
        <ul class="grid grid-cols-1 md:grid-cols-3 gap-6 mt-6">
          {
            latestPosts.map((post) => (
              <li class="border-2 border-neutral-400 rounded-lg hover:scale-105 transition-transform">
                <a
                  href={post.url}
                  class="bg-white rounded-lg flex flex-col gap-3 h-full"
                >
                  <div class="w-full h-[173px] relative">
                    <Image
                      width={480}
                      height={173}
                      src={
                        post.frontmatter.image
                          ? post.frontmatter.image
                          : "/placeholder.png"
                      }
                      alt={post.frontmatter.title}
                      fit="fill"
                      class="size w-full h-full rounded-t-lg object-cover absolute inset-0"
                    />
                  </div>
                  <div class="p-2">
                    <time
                      datetime={post.frontmatter.pubDate}
                      class="text-sm text-gray-700"
                    >
                      {new Date(post.frontmatter.pubDate).toLocaleDateString(
                        "en-us",
                        {
                          year: "numeric",
                          month: "short",
                          day: "numeric",
                        }
                      )}
                    </time>
                    <h2 class="text-xl font-bold mb-2 text-primary">
                      {post.frontmatter.title}
                    </h2>
                    <div class="flex gap-2">
                      {post.frontmatter.tags &&
                        post.frontmatter.tags.map((tag: string) => (
                          <span class="border border-neutral-700 uppercase text-sm text-neutral-700 px-2">
                            {tag}
                          </span>
                        ))}
                    </div>
                    <p class="mt-2 text-neutral-700">
                      {post.frontmatter.description}
                    </p>
                  </div>
                </a>
              </li>
            ))
          }
        </ul>
      </div>
    </section>

    <!-- Certiificates -->
    <section class="bg-neutral-200 relative pb-12">
      <div class="w-full rotate-180 absolute left-0 top-0 -translate-y-full">
        <svg
          data-name="Layer 1"
          xmlns="http://www.w3.org/2000/svg"
          viewBox="0 0 1200 120"
          preserveAspectRatio="none"
          style="transform: rotateY(180deg);"
          class="h-8 w-full relative block"
        >
          <path
            d="M1200 120L0 16.48 0 0 1200 0 1200 120z"
            class="shape-fill fill-neutral-200"></path>
        </svg>
      </div>
      <h2 class="text-primary text-2xl font-bold text-center pt-6">
        Certificates
      </h2>

      <!-- Certificates Images -->
      <div class="container mx-auto mt-6 px-4">
        <div
          class="swiper before:absolute before:z-10 before:h-full before:w-11 before:content-[''] before:bg-gradient-to-r before:from-neutral-200 after:right-0 after:absolute after:z-10 after:h-full after:w-11 after:content-[''] after:bg-gradient-to-r after:from-neutral-200 after:top-0"
        >
          <div class="swiper-wrapper">
            <Image
              src={DanteCert}
              alt="cert"
              class="border-4 border-black w-full swiper-slide"
              format="webp"
            />
            <Image
              src={InCTFJCert}
              alt="cert"
              class="border-4 border-black w-full swiper-slide"
              format="webp"
            />
            <Image
              src={PEHCert}
              alt="cert"
              class="border-4 border-black w-full swiper-slide"
              format="webp"
            />
            <Image
              src={thmCert}
              alt="cert"
              class="border-4 border-black w-full swiper-slide"
              format="webp"
            />
            <Image
              src={thm2Cert}
              alt="cert"
              class="border-4 border-black w-full swiper-slide"
              format="webp"
            />
          </div>
          <div class="swiper-button-prev" style="z-index: 30 !important;"></div>
          <div class="swiper-button-next" style="z-index: 30 !important;"></div>
        </div>
      </div>
    </section>

    <!-- Contact -->
    <Footer />

    <script>
      import "../swiper-config.js";
    </script>

    <style is:global>
      .swiper {
        height: 333px;
      }
      .swiper::after {
        transform: rotateZ(180deg);
      }
      .swiper-slide {
        background-position: center;
        background-size: cover;
        height: 333px;
      }
      .swiper-button-prev,
      .swiper-button-next {
        color: rgb(234 32 39);
        border: 2px solid #6d6d6d;
        border-radius: 100%;
        padding: 1.2rem;
        background-color: rgba(0, 0, 0, 0.1);
      }
      .swiper-button-prev::after,
      .swiper-button-next::after {
        font-size: 24px;
        font-weight: 800;
      }
      .swiper-wrapper img {
        cursor: grab;
      }
      .swiper-button-prev:hover,
      .swiper-button-next:hover {
        border: 2px solid black;
      }
    </style>
  </body>
</html>
